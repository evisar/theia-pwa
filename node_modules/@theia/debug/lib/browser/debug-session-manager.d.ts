/********************************************************************************
 * Copyright (C) 2018 Red Hat, Inc. and others.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License v. 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0.
 *
 * This Source Code may also be made available under the following Secondary
 * Licenses when the conditions for such availability set forth in the Eclipse
 * Public License v. 2.0 are satisfied: GNU General Public License, version 2
 * with the GNU Classpath Exception which is available at
 * https://www.gnu.org/software/classpath/license.html.
 *
 * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0
 ********************************************************************************/
import { Emitter, Event, DisposableCollection, MessageService } from '@theia/core';
import { LabelProvider } from '@theia/core/lib/browser';
import { EditorManager } from '@theia/editor/lib/browser';
import { DebugService } from '../common/debug-service';
import { DebugState, DebugSession } from './debug-session';
import { DebugSessionFactory, DebugSessionContributionRegistry } from './debug-session-contribution';
import { DebugThread } from './model/debug-thread';
import { DebugStackFrame } from './model/debug-stack-frame';
import { DebugBreakpoint } from './model/debug-breakpoint';
import { BreakpointManager } from './breakpoint/breakpoint-manager';
import URI from '@theia/core/lib/common/uri';
import { VariableResolverService } from '@theia/variable-resolver/lib/browser';
import { DebugSessionOptions, InternalDebugSessionOptions } from './debug-session-options';
export interface DidChangeActiveDebugSession {
    previous: DebugSession | undefined;
    current: DebugSession | undefined;
}
export interface DidChangeBreakpointsEvent {
    session?: DebugSession;
    uri: URI;
}
export interface DebugSessionCustomEvent {
    readonly body?: any;
    readonly event: string;
    readonly session: DebugSession;
}
export declare class DebugSessionManager {
    protected readonly _sessions: Map<string, DebugSession>;
    protected readonly onDidCreateDebugSessionEmitter: Emitter<DebugSession>;
    readonly onDidCreateDebugSession: Event<DebugSession>;
    protected readonly onDidStartDebugSessionEmitter: Emitter<DebugSession>;
    readonly onDidStartDebugSession: Event<DebugSession>;
    protected readonly onDidStopDebugSessionEmitter: Emitter<DebugSession>;
    readonly onDidStopDebugSession: Event<DebugSession>;
    protected readonly onDidChangeActiveDebugSessionEmitter: Emitter<DidChangeActiveDebugSession>;
    readonly onDidChangeActiveDebugSession: Event<DidChangeActiveDebugSession>;
    protected readonly onDidDestroyDebugSessionEmitter: Emitter<DebugSession>;
    readonly onDidDestroyDebugSession: Event<DebugSession>;
    protected readonly onDidReceiveDebugSessionCustomEventEmitter: Emitter<DebugSessionCustomEvent>;
    readonly onDidReceiveDebugSessionCustomEvent: Event<DebugSessionCustomEvent>;
    protected readonly onDidChangeBreakpointsEmitter: Emitter<DidChangeBreakpointsEvent>;
    readonly onDidChangeBreakpoints: Event<DidChangeBreakpointsEvent>;
    protected fireDidChangeBreakpoints(event: DidChangeBreakpointsEvent): void;
    protected readonly onDidChangeEmitter: Emitter<DebugSession | undefined>;
    readonly onDidChange: Event<DebugSession | undefined>;
    protected fireDidChange(current: DebugSession | undefined): void;
    protected readonly debugSessionFactory: DebugSessionFactory;
    protected readonly debug: DebugService;
    protected readonly labelProvider: LabelProvider;
    protected readonly editorManager: EditorManager;
    protected readonly breakpoints: BreakpointManager;
    protected readonly variableResolver: VariableResolverService;
    protected readonly sessionContributionRegistry: DebugSessionContributionRegistry;
    protected readonly messageService: MessageService;
    protected init(): void;
    start(options: DebugSessionOptions): Promise<DebugSession | undefined>;
    protected configurationIds: Map<string, number>;
    protected resolveConfiguration(options: Readonly<DebugSessionOptions>): Promise<InternalDebugSessionOptions>;
    protected doStart(sessionId: string, options: DebugSessionOptions): Promise<DebugSession>;
    restart(): Promise<DebugSession | undefined>;
    restart(session: DebugSession): Promise<DebugSession>;
    protected doRestart(session: DebugSession, restart?: any): Promise<DebugSession | undefined>;
    protected remove(sessionId: string): void;
    getSession(sessionId: string): DebugSession | undefined;
    readonly sessions: DebugSession[];
    protected _currentSession: DebugSession | undefined;
    protected readonly toDisposeOnCurrentSession: DisposableCollection;
    currentSession: DebugSession | undefined;
    open(): void;
    protected updateBreakpoints(previous: DebugSession | undefined, current: DebugSession | undefined): void;
    protected updateCurrentSession(session: DebugSession | undefined): void;
    readonly currentThread: DebugThread | undefined;
    readonly state: DebugState;
    readonly currentFrame: DebugStackFrame | undefined;
    readonly topFrame: DebugStackFrame | undefined;
    /**
     * Destroy the debug session. If session identifier isn't provided then
     * all active debug session will be destroyed.
     * @param sessionId The session identifier
     */
    destroy(sessionId?: string): void;
    private doDestroy;
    getBreakpoints(session?: DebugSession): DebugBreakpoint[];
    getBreakpoints(uri: URI, session?: DebugSession): DebugBreakpoint[];
    getBreakpoint(uri: URI, line: number): DebugBreakpoint | undefined;
    addBreakpoints(breakpoints: DebugBreakpoint[]): void;
    deleteBreakpoints(breakpoints: DebugBreakpoint[]): void;
}
//# sourceMappingURL=debug-session-manager.d.ts.map