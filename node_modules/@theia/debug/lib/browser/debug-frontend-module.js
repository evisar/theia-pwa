"use strict";
/********************************************************************************
 * Copyright (C) 2018 Red Hat, Inc. and others.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License v. 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0.
 *
 * This Source Code may also be made available under the following Secondary
 * Licenses when the conditions for such availability set forth in the Eclipse
 * Public License v. 2.0 are satisfied: GNU General Public License, version 2
 * with the GNU Classpath Exception which is available at
 * https://www.gnu.org/software/classpath/license.html.
 *
 * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0
 ********************************************************************************/
Object.defineProperty(exports, "__esModule", { value: true });
require("../../src/browser/style/index.css");
var inversify_1 = require("inversify");
var debug_configuration_manager_1 = require("./debug-configuration-manager");
var debug_widget_1 = require("./view/debug-widget");
var debug_service_1 = require("../common/debug-service");
var browser_1 = require("@theia/core/lib/browser");
var debug_session_manager_1 = require("./debug-session-manager");
var debug_resource_1 = require("./debug-resource");
var debug_session_contribution_1 = require("./debug-session-contribution");
var core_1 = require("@theia/core");
var debug_frontend_application_contribution_1 = require("./debug-frontend-application-contribution");
var debug_console_contribution_1 = require("./console/debug-console-contribution");
var breakpoint_manager_1 = require("./breakpoint/breakpoint-manager");
var debug_editor_service_1 = require("./editor/debug-editor-service");
var debug_session_widget_1 = require("./view/debug-session-widget");
var debug_keybinding_contexts_1 = require("./debug-keybinding-contexts");
var debug_editor_model_1 = require("./editor/debug-editor-model");
require("./debug-monaco-contribution");
var debug_preferences_1 = require("./debug-preferences");
var debug_schema_updater_1 = require("./debug-schema-updater");
exports.default = new inversify_1.ContainerModule(function (bind) {
    core_1.bindContributionProvider(bind, debug_session_contribution_1.DebugSessionContribution);
    bind(debug_session_contribution_1.DebugSessionFactory).to(debug_session_contribution_1.DefaultDebugSessionFactory).inSingletonScope();
    bind(debug_session_manager_1.DebugSessionManager).toSelf().inSingletonScope();
    bind(breakpoint_manager_1.BreakpointManager).toSelf().inSingletonScope();
    bind(debug_editor_model_1.DebugEditorModelFactory).toDynamicValue(function (_a) {
        var container = _a.container;
        return (function (editor) {
            return debug_editor_model_1.DebugEditorModel.createModel(container, editor);
        });
    }).inSingletonScope();
    bind(debug_editor_service_1.DebugEditorService).toSelf().inSingletonScope();
    bind(debug_session_widget_1.DebugSessionWidgetFactory).toDynamicValue(function (_a) {
        var container = _a.container;
        return function (options) { return debug_session_widget_1.DebugSessionWidget.createWidget(container, options); };
    }).inSingletonScope();
    bind(browser_1.WidgetFactory).toDynamicValue(function (_a) {
        var container = _a.container;
        return ({
            id: debug_widget_1.DebugWidget.ID,
            createWidget: function () { return debug_widget_1.DebugWidget.createWidget(container); }
        });
    }).inSingletonScope();
    debug_console_contribution_1.DebugConsoleContribution.bindContribution(bind);
    bind(debug_schema_updater_1.DebugSchemaUpdater).toSelf().inSingletonScope();
    bind(debug_configuration_manager_1.DebugConfigurationManager).toSelf().inSingletonScope();
    bind(debug_service_1.DebugService).toDynamicValue(function (context) { return browser_1.WebSocketConnectionProvider.createProxy(context.container, debug_service_1.DebugPath); }).inSingletonScope();
    bind(debug_resource_1.DebugResourceResolver).toSelf().inSingletonScope();
    bind(core_1.ResourceResolver).toService(debug_resource_1.DebugResourceResolver);
    bind(browser_1.KeybindingContext).to(debug_keybinding_contexts_1.InDebugModeContext).inSingletonScope();
    browser_1.bindViewContribution(bind, debug_frontend_application_contribution_1.DebugFrontendApplicationContribution);
    bind(browser_1.FrontendApplicationContribution).toService(debug_frontend_application_contribution_1.DebugFrontendApplicationContribution);
    bind(debug_session_contribution_1.DebugSessionContributionRegistryImpl).toSelf().inSingletonScope();
    bind(debug_session_contribution_1.DebugSessionContributionRegistry).toService(debug_session_contribution_1.DebugSessionContributionRegistryImpl);
    debug_preferences_1.bindDebugPreferences(bind);
});
//# sourceMappingURL=debug-frontend-module.js.map