"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright (C) 2017 TypeFox and others.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 */
var inversify_1 = require("inversify");
var lib_1 = require("sprotty/lib");
var popup_1 = require("./popup");
var views_1 = require("./views");
var yang_models_1 = require("./yang-models");
var model_factory_1 = require("./model-factory");
var yangDiagramModule = new inversify_1.ContainerModule(function (bind, unbind, isBound, rebind) {
    rebind(lib_1.TYPES.ILogger).to(lib_1.ConsoleLogger).inSingletonScope();
    rebind(lib_1.TYPES.LogLevel).toConstantValue(lib_1.LogLevel.warn);
    rebind(lib_1.TYPES.IModelFactory).to(model_factory_1.YangModelFactory).inSingletonScope();
    bind(lib_1.TYPES.PopupModelFactory).toConstantValue(popup_1.popupModelFactory);
    var context = { bind: bind, unbind: unbind, isBound: isBound, rebind: rebind };
    lib_1.configureModelElement(context, 'graph', lib_1.SGraph, lib_1.SGraphView);
    lib_1.configureModelElement(context, 'node:class', yang_models_1.YangNode, views_1.ClassNodeView);
    lib_1.configureModelElement(context, 'node:module', yang_models_1.ModuleNode, views_1.ModuleNodeView);
    lib_1.configureModelElement(context, 'node:choice', yang_models_1.YangNode, views_1.ChoiceNodeView);
    lib_1.configureModelElement(context, 'node:case', yang_models_1.YangNode, views_1.CaseNodeView);
    lib_1.configureModelElement(context, 'node:pill', yang_models_1.YangNode, views_1.UsesNodeView);
    lib_1.configureModelElement(context, 'node:note', yang_models_1.YangNode, views_1.NoteView);
    lib_1.configureModelElement(context, 'label:heading', lib_1.SLabel, lib_1.SLabelView);
    lib_1.configureModelElement(context, 'label:text', lib_1.SLabel, lib_1.SLabelView);
    lib_1.configureModelElement(context, 'ylabel:text', yang_models_1.YangLabel, lib_1.SLabelView);
    lib_1.configureModelElement(context, 'label:classHeader', lib_1.SLabel, lib_1.SLabelView);
    lib_1.configureModelElement(context, 'tag', yang_models_1.Tag, views_1.TagView);
    lib_1.configureModelElement(context, 'label:tag', lib_1.SLabel, lib_1.SLabelView);
    lib_1.configureModelElement(context, 'comp:comp', lib_1.SCompartment, lib_1.SCompartmentView);
    lib_1.configureModelElement(context, 'comp:classHeader', lib_1.SCompartment, views_1.HeaderCompartmentView);
    lib_1.configureModelElement(context, 'edge:straight', lib_1.SEdge, lib_1.PolylineEdgeView);
    lib_1.configureModelElement(context, 'edge:composition', lib_1.SEdge, views_1.CompositionEdgeView);
    lib_1.configureModelElement(context, 'edge:dashed', lib_1.SEdge, views_1.DashedEdgeView);
    lib_1.configureModelElement(context, 'edge:import', lib_1.SEdge, views_1.ImportEdgeView);
    lib_1.configureModelElement(context, 'edge:uses', lib_1.SEdge, views_1.DashedArrowEdgeView);
    lib_1.configureModelElement(context, 'edge:augments', lib_1.SEdge, views_1.ArrowEdgeView);
    lib_1.configureModelElement(context, 'html', lib_1.HtmlRoot, lib_1.HtmlRootView);
    lib_1.configureModelElement(context, 'pre-rendered', lib_1.PreRenderedElement, lib_1.PreRenderedView);
    lib_1.configureModelElement(context, lib_1.ExpandButtonHandler.TYPE, lib_1.SButton, lib_1.ExpandButtonView);
});
function createContainer(widgetId) {
    var container = new inversify_1.Container();
    container.load(lib_1.defaultModule, lib_1.selectModule, lib_1.moveModule, lib_1.boundsModule, lib_1.undoRedoModule, lib_1.viewportModule, lib_1.hoverModule, lib_1.fadeModule, lib_1.exportModule, lib_1.expandModule, lib_1.openModule, lib_1.buttonModule, lib_1.modelSourceModule, yangDiagramModule);
    //        container.bind(TYPES.ModelSource).to(TheiaDiagramServer).inSingletonScope()
    lib_1.overrideViewerOptions(container, {
        needsClientLayout: true,
        needsServerLayout: true,
        baseDiv: widgetId
    });
    return container;
}
exports.default = createContainer;
//# sourceMappingURL=di.config.js.map